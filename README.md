# AI æ™ºèƒ½ç©¿è¡£æ¨èç³»ç»Ÿ

åŸºäº Vue3 + FastAPI æ„å»ºçš„æ™ºèƒ½ç©¿è¡£æ¨èç³»ç»Ÿï¼Œé€šè¿‡åˆ†æå¤©æ°”æ•°æ®å’Œç”¨æˆ·éœ€æ±‚ï¼Œæä¾›ä¸ªæ€§åŒ–çš„ç©¿è¡£å»ºè®®ã€‚

## ğŸŒŸ é¡¹ç›®ç‰¹ç‚¹

- ğŸ¯ **æ™ºèƒ½æ¨è**ï¼šç»“åˆå¤©æ°”æ•°æ®å’Œç”¨æˆ·éœ€æ±‚ç”Ÿæˆä¸ªæ€§åŒ–ç©¿è¡£å»ºè®®
- ğŸ’¬ **æµå¼å¯¹è¯**ï¼šæ”¯æŒå®æ—¶æµå¼è¾“å‡ºï¼Œæä¾›ç±»ä¼¼ ChatGPT çš„èŠå¤©ä½“éªŒ
- ğŸ”„ **å®æ—¶å¤©æ°”**ï¼šé€šè¿‡å¤©æ°” Agent è·å–å®æ—¶å¤©æ°”ä¿¡æ¯
- ğŸ¨ **ç°ä»£åŒ– UI**ï¼šé‡‡ç”¨ Vue3 æ„å»ºçš„å“åº”å¼ç•Œé¢
- ğŸš€ **é«˜æ€§èƒ½**ï¼šä½¿ç”¨ SSEï¼ˆServer-Sent Eventsï¼‰å®ç°å®æ—¶é€šä¿¡

## ğŸ“‹ åŠŸèƒ½åˆ—è¡¨

- âœ… ç”¨æˆ·è¾“å…¥åŸå¸‚å’Œæ—¥æœŸ
- âœ… å®æ—¶å¤©æ°”æŸ¥è¯¢
- âœ… æ™ºèƒ½ç©¿è¡£æ¨è
- âœ… æµå¼èŠå¤©äº¤äº’
- âœ… æ¶ˆæ¯å†å²è®°å½•
- âœ… ç”¨æˆ·è‡ªå®šä¹‰å¤´åƒ
- âœ… å“åº”å¼è®¾è®¡

## ğŸ—ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯
- **Vue 3** - æ¸è¿›å¼ JavaScript æ¡†æ¶
- **Vite** - å¿«é€Ÿçš„å‰ç«¯æ„å»ºå·¥å…·
- **CSS3** - ç°ä»£æ ·å¼è®¾è®¡

### åç«¯
- **FastAPI** - ç°ä»£ã€å¿«é€Ÿçš„ Web æ¡†æ¶
- **OpenAI API** - å¤§è¯­è¨€æ¨¡å‹é›†æˆ
- **å¤©æ°” Agent** - æ™ºèƒ½å¤©æ°”æŸ¥è¯¢ç³»ç»Ÿ
- **CORS** - è·¨åŸŸèµ„æºå…±äº«æ”¯æŒ
- **SSE** - æœåŠ¡å™¨æ¨é€äº‹ä»¶

### æ•°æ®æº
- **DeepSeek API** - å¤§è¯­è¨€æ¨¡å‹
- **é«˜å¾·åœ°å›¾ API** - åœ°ç†ä½ç½®å’Œå¤©æ°”æ•°æ®

## ğŸ“ é¡¹ç›®ç»“æ„

```
AI/
â”œâ”€â”€ backend/                    # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ agent/                 # æ™ºèƒ½ä½“æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ recommend.py       # æ¨èæ™ºèƒ½ä½“
â”‚   â”‚   â””â”€â”€ weather_agent.py   # å¤©æ°”æ™ºèƒ½ä½“
â”‚   â”œâ”€â”€ main.py                # FastAPI ä¸»ç¨‹åº
â”œâ”€â”€ frontend/                 # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ public/                # é™æ€èµ„æº
â”‚   â”‚   â””â”€â”€ assets/           # å¤´åƒç­‰èµ„æº
â”‚   â”‚       â”œâ”€â”€ user.jpg     # ç”¨æˆ·å¤´åƒ
â”‚   â”‚       â””â”€â”€ bot.png      # æœºå™¨äººå¤´åƒ
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/           # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ InputPage.vue # è¾“å…¥é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ ChatPage.vue # èŠå¤©é¡µé¢
â”‚   â”‚   â”œâ”€â”€ router/           # è·¯ç”±é…ç½®
â”‚   â”‚   â”‚   â””â”€â”€ index.js
â”‚   â”‚   â”œâ”€â”€ App.vue          # æ ¹ç»„ä»¶
â”‚   â”‚   â””â”€â”€ main.js          # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.js
â”œâ”€â”€ .env.example                     # ç¯å¢ƒå˜é‡é…ç½®

```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.13+
- Node.js 24+
- npm æˆ– yarn

#### å®‰è£… Python ä¾èµ–

```bash
pip install -r requirements.txt
```

#### é…ç½®ç¯å¢ƒå˜é‡

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œé…ç½®ä»¥ä¸‹å¿…è¦ä¿¡æ¯ï¼š

```env
# é…ç½®envæ–‡ä»¶
cp .env.example .env

# LLM API é…ç½®
LLM_MODEL_ID=you_model_id_here
LLM_BASE_URL=your_base_url_here
LLM_API_KEY=your_api_key_here

# é«˜å¾·å¤©æ°” API é…ç½® https://lbs.amap.com/
AMAP_API_KEY=your_amap_key_here
```

### 3. é…ç½®å‰ç«¯ç¯å¢ƒ

```bash
cd frontend
npm install
```

### 4. è¿è¡Œé¡¹ç›®

#### å¯åŠ¨åç«¯æœåŠ¡

```bash
cd backend
python main.py
åç«¯å°†åœ¨ `http://localhost:8000` è¿è¡Œ
```
### Windows ç”¨æˆ·æ³¨æ„äº‹é¡¹

åœ¨éƒ¨åˆ† Windows ç¯å¢ƒä¸‹ï¼Œå¦‚æœæ²¡æœ‰ç®¡ç†å‘˜æƒé™ï¼Œ`npx` éœ€è¦ä½¿ç”¨ `npx.cmd` æ‰èƒ½è¢«æ­£ç¡®è°ƒç”¨ï¼Œä¸”éœ€è¦ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œã€‚

**å¦‚æœä½ åœ¨å¯¹è¯æ—¶é‡åˆ°ä»¥ä¸‹æŠ¥é”™ï¼š**
> `é”™è¯¯: unhandled errors in a TaskGroup (1 sub-exception)`

**è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤è§£å†³ï¼š**

1.  **ä¿®æ”¹ä»£ç **ï¼š
    æ‰“å¼€ `backend/agent/weather_agent.py`ï¼Œæœç´¢ `command="npx"`ï¼Œå°†å…¶ä¿®æ”¹ä¸º `command="npx.cmd"`ã€‚

2.  **æå‡æƒé™ï¼ˆå…³é”®ï¼‰**ï¼š
    æ­¤æŠ¥é”™é€šå¸¸æ˜¯å› ä¸º `npx` è¯•å›¾ä¸‹è½½å·¥å…·åˆ°ç³»ç»Ÿç›®å½•æ—¶æƒé™ä¸è¶³ (`EPERM`)ã€‚
    * **å…³é—­** å½“å‰çš„ PyCharm æˆ–ç»ˆç«¯ã€‚
    * å³é”®ç‚¹å‡» PyCharm (æˆ–ç»ˆç«¯) å›¾æ ‡ï¼Œé€‰æ‹© **â€œä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œâ€ (Run as Administrator)**ã€‚
    * é‡æ–°å¯åŠ¨åç«¯é¡¹ç›®å³å¯è§£å†³ã€‚



#### å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨

```bash
cd frontend
npm run dev
```
å‰ç«¯å°†åœ¨ `http://localhost:5173` è¿è¡Œ

### 5. è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:5173`ï¼Œå³å¯ä½¿ç”¨æ™ºèƒ½ç©¿è¡£æ¨èç³»ç»Ÿã€‚

## ğŸ“– API æ–‡æ¡£

### ä¸»è¦æ¥å£

#### SSE æµå¼èŠå¤©æ¥å£

```
GET /chat/stream?message={ç”¨æˆ·è¾“å…¥}
```

å‚æ•°ï¼š
- `message` (required): ç”¨æˆ·è¾“å…¥çš„è‡ªç„¶è¯­è¨€

å“åº”æ ¼å¼ï¼š
- Server-Sent Events (SSE)
- JSON æ•°æ®æ ¼å¼

#### ç¤ºä¾‹

```bash
curl "http://localhost:8000/chat/stream?message=2æœˆ6æ—¥å»ç¦å·åº”è¯¥ç©¿ä»€ä¹ˆ"
```

å“åº”ç¤ºä¾‹ï¼š
```
data: {"type": "chunk", "content": "æ ¹"}
data: {"type": "chunk", "content": "æ®"}
data: {"type": "chunk", "content": "å¤©"}
...
data: {"type": "done"}
```

### æ•°æ®æ ¼å¼è¯´æ˜

#### æ¶ˆæ¯ç±»å‹

- `chunk`: æµå¼è¾“å‡ºå†…å®¹
- `done`: æµå¼è¾“å‡ºå®Œæˆ
- `error`: é”™è¯¯ä¿¡æ¯

#### é”™è¯¯å¤„ç†

```json
{
  "type": "error",
  "message": "é”™è¯¯ä¿¡æ¯"
}
```

### è‡ªå®šä¹‰å¤´åƒ

å°†è‡ªå®šä¹‰å¤´åƒæ–‡ä»¶æ”¾ç½®åœ¨ `frontend/public/assets/` ç›®å½•ä¸‹ï¼š

- ç”¨æˆ·å¤´åƒï¼š`user.png`
- æœºå™¨äººå¤´åƒï¼š`bot.png`

æ”¯æŒçš„æ ¼å¼ï¼šPNGã€JPGã€SVGï¼ˆå»ºè®®æ­£æ–¹å½¢ï¼‰

## ğŸ¯ ä½¿ç”¨æŒ‡å—

### åŸºæœ¬ä½¿ç”¨

1. åœ¨é¦–é¡µè¾“å…¥æ¡†ä¸­è¾“å…¥é—®é¢˜
   - ç¤ºä¾‹ï¼š"2æœˆ6æ—¥å»ç¦å·åº”è¯¥ç©¿ä»€ä¹ˆï¼Ÿ"
2. ç‚¹å‡»"å‘é€"æŒ‰é’®
3. ç­‰å¾…ç³»ç»Ÿè¿”å›æµå¼å›å¤
4. å¯åœ¨èŠå¤©é¡µé¢ç»§ç»­å¯¹è¯

### ä½¿ç”¨æç¤º

- æ”¯æŒè‡ªç„¶è¯­è¨€è¾“å…¥
- å¯æŸ¥è¯¢æœªæ¥4å¤©å†…çš„å¤©æ°”
- ç³»ç»Ÿä¼šæ ¹æ®æ°”æ¸©ã€æ¸©å·®ã€å¤©æ°”çŠ¶å†µç»™å‡ºå…·ä½“å»ºè®®

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### ä¿®æ”¹æ¨èé€»è¾‘

ç¼–è¾‘ `backend/agent/recommend.py` æ¥ä¿®æ”¹æ¨èé€»è¾‘ã€‚

### ä¿®æ”¹å¤©æ°”æŸ¥è¯¢

ç¼–è¾‘ `backend/agent/weather_agent.py` æ¥ä¿®æ”¹å¤©æ°”æŸ¥è¯¢é€»è¾‘ã€‚

### è‡ªå®šä¹‰æ ·å¼

ä¿®æ”¹ `frontend/src/pages/` ä¸­çš„ Vue ç»„ä»¶æ ·å¼ã€‚

## ğŸ“Š é¡¹ç›®æ¶æ„

### å‰ç«¯æ¶æ„

```
frontend/
â”œâ”€â”€ InputPage.vue    # è¾“å…¥é¡µé¢
â””â”€â”€ ChatPage.vue     # èŠå¤©é¡µé¢ï¼ˆåŒ…å«æ¶ˆæ¯åˆ—è¡¨ã€è¾“å…¥æ¡†ï¼‰
```

### åç«¯æ¶æ„

```
backend/
â”œâ”€â”€ main.py         # FastAPI åº”ç”¨å…¥å£
â””â”€â”€ agent/
    â”œâ”€â”€ recommend.py   # æ¨èæ™ºèƒ½ä½“
    â””â”€â”€ weather_agent.py  # å¤©æ°”æ™ºèƒ½ä½“
```
---

**æ³¨æ„**ï¼šæœ¬é¡¹ç›®ä»…ç”¨äºå­¦ä¹ å’Œæ¼”ç¤ºç›®çš„ï¼Œè¯·éµå®ˆç›¸å…³ API çš„ä½¿ç”¨æ¡æ¬¾ã€‚
